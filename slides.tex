\documentclass[svgnames]{beamer}

\usetheme{Dresden}
\usecolortheme{beaver}

\usepackage{import, fancybox, graphicx, color, colortbl}

\newcommand{\ssline}{\vspace{8 pt}}

\title{TCP ex Machina: \\Computer-Generated Congestion Control}

\author{Keith~Winstein and Hari~Balakrishnan}
\institute{MIT Computer Science and Artificial Intelligence Laboratory}
\date{August 14, 2013}

\begin{document}

\begin{frame}[plain]

\titlepage

\end{frame}

\section{Introduction}

\begin{frame}
\frametitle{Congestion control!}

\begin{itemize}

\Large

\item Prevents congestion collapse

\item Allocates network resources among users

\item Can be purely end-to-end or not

\end{itemize}

\end{frame}

\begin{frame}
\frametitle{Congestion control (1980s)}
\noindent \hspace{-.75 cm} \includegraphics[width=1.1\textwidth]{march-4.pdf}
\end{frame}
\begin{frame}
\frametitle{Congestion control (1990s)}
\noindent \hspace{-.75 cm} \includegraphics[width=1.1\textwidth]{march-3.pdf}
\end{frame}
\begin{frame}
\frametitle{Congestion control (2000s)}
\noindent \hspace{-.75 cm} \includegraphics[width=1.1\textwidth]{march-2.pdf}
\end{frame}
\begin{frame}
\frametitle{Congestion control (2010s)}
\noindent \hspace{-.75 cm} \includegraphics[width=1.1\textwidth]{march-1.pdf}
\end{frame}
\begin{frame}
\frametitle{Congestion control (this SIGCOMM)}
\noindent \hspace{-.75 cm} \includegraphics[width=1.1\textwidth]{march.pdf}
\end{frame}

%\begin{frame}
%\begin{centering}
%\LARGE One size does not fit all.
%
%\end{centering}
%\end{frame}

\begin{frame}

\frametitle{Our work}

\begin{centering}

\LARGE \textcolor{DarkGreen}{If congestion control is the answer,\\what's the question?}

\vspace{\baselineskip}

\pause

\LARGE \textcolor{NavyBlue}{Are there better answers?}

\end{centering}

\end{frame}

\begin{frame}
\frametitle{Rational choice of scheme is challenging}

\begin{centering}
\includegraphics[height=20 pt]{cubic.pdf}\hspace{8 pt}{\bf vs.}\hspace{8 pt}\includegraphics[height=20 pt]{compound.pdf}

\end{centering}

\ssline
\ssline
\ssline

\begin{itemize}

\Large

\item Different goals?

\item Different assumptions about network?

\item One scheme just plain better?

\end{itemize}

\end{frame}

\begin{frame}
\frametitle{What are the ends that TCP tries to achieve?}

\begin{itemize}

\Large

\item ``Teleology of TCP'' is mostly unknown

\item Solutions for long-running flows only

\item Dynamical behavior is complex

\end{itemize}

\end{frame}

\begin{frame}
\frametitle{Networks constrained by a fuzzy idea of TCP's assumptions}

\Large

\begin{itemize}
\item Mask stochastic loss
\item Bufferbloat
\item No multipath routing
\item Mask out-of-order delivery
\end{itemize}

\end{frame}

\begin{frame}
\frametitle{Apps hack around TCP}

\Large

\begin{itemize}
\item Open lots of flows
\item Application-layer pacing
\item Give up and do it yourself

\begin{itemize}
\item Chrome (QUIC), Bittorrent ($\mu$TP), Mosh, Aspera
\end{itemize}

\end{itemize}

\end{frame}

\begin{frame}
\frametitle{Better: free the network to evolve}

\Large Transport layer should adapt to \emph{whatever}:

\begin{itemize}
\item Network does

\item Application wants

\end{itemize}

\end{frame}

\begin{frame}
\frametitle{What we built}

\begin{centering}
\fbox{\noindent \begin{tabular}{ll}
\Large \textcolor{DarkRed}{\bf Remy}: & \Large a program that generates \\ & \Large congestion-control schemes offline
\end{tabular}}

\end{centering}

\ssline
\ssline

\textcolor{DarkBlue}{\bf Input:}

\begin{itemize}
\item Prior assumptions about the network

\item Goal
\end{itemize}

\textcolor{DarkBlue}{\bf Output:} A congestion-control scheme (a RemyCC)

\ssline

\textcolor{DarkBlue}{\bf Time:} a few hours

\ssline

\textcolor{DarkBlue}{\bf Cost:} \$5--\$10 on Amazon EC$^2$

\end{frame}

\begin{frame}
\frametitle{The basic question of congestion control}

\section{The problem}

\begin{centering}
\fbox{
\begin{minipage}{6 cm}
\LARGE At this moment, do I:

\begin{itemize}

\item send a packet
\item not send a packet?

\end{itemize}

\end{minipage}
}

\end{centering}

\end{frame}

\begin{frame}
\frametitle{Remy: Start with goal, work backwards to algorithm}

\begin{centering}
\includegraphics[scale=.6]{remy.pdf}

\end{centering}

\end{frame}

\begin{frame}
\frametitle{Prior knowledge}

\begin{itemize}

\item Uncertain, stochastic model for the network

\begin{itemize}
\item Link speed distribution
\item Delay distribution

\end{itemize}

\item Traffic model

\begin{itemize}
\item ``Conversation''-like (time-based)
\item Datacenter-like workload
\item Web browsing
\end{itemize}

\end{itemize}

\end{frame}

\begin{frame}
\frametitle{Objective function}

\begin{itemize}

\item Tradeoff between \textbf{throughput} and \textbf{delay}

\item Tradeoff between \textbf{efficiency} and \textbf{fairness}

\item Pareto-efficiency

\end{itemize}

\end{frame}

\begin{frame}
\frametitle{Alpha-fairness}

$$U_{\alpha}(x) = \frac{x^{1-\alpha}}{1-\alpha}$$

\begin{itemize}

\item ``Most fair'' Pareto-efficient utility function

\item $\alpha = 0$: efficiency only

\item $\alpha = 2$: min.~potential delay fairness

\item $\alpha \rightarrow \infty$: maximin fairness

\item $\alpha \rightarrow 1$: proportional fairness ($\log(x)$)

\end{itemize}

\end{frame}

\begin{frame}
\frametitle{Objective}

$$\log(\textrm{throughput}) - \delta \log(\textrm{delay})$$

Other options:

\begin{itemize}

\item average flow completion time

\item average transaction completion time

\item 95th percentile transaction completion time

\item \ldots

\end{itemize}

\end{frame}

\begin{frame}
\frametitle{What is this problem?}

\begin{itemize}

\item Decentralized end-to-end algorithm

\item Endpoints have no control over routing.

\item Each sender only gets its own receiver's acknowledgements

\end{itemize}

\end{frame}

\begin{frame}
\frametitle{Optimal solution is intractable}

\section{Remy}

Arbitrary algorithm relates:

\begin{itemize}

\item Full history of acknowledgements

\item Full history of packets sent

\end{itemize}

\ldots to decision about when to send the next packet.

\ssline

Search for algorithm is \textsc{nexp}-complete.

\end{frame}

\begin{frame}
\frametitle{Simplifying the state}

Instead, keep limited state variables:

\begin{enumerate}

\item Moving average of interval between acknowledgements

\item Moving average of interval between sender timestamps reflected in acks

\item Ratio of latest RTT to smallest RTT seen so far

\end{enumerate}

\end{frame}

\begin{frame}
\frametitle{Why these three signals?}

\begin{itemize}

\item More signals increase search time.

\item We explored long-term averages, RTT, etc., but didn't help.

\item Other signals might help other networks!

\item Benefit can be measured empirically.

\end{itemize}

\end{frame}

\begin{frame}
\frametitle{The action}

\begin{enumerate}

\item Increment to congestion window

\item Multiple to congestion window

\item Upper bound on rate of sending

\end{enumerate}

\end{frame}

\begin{frame}
\frametitle{Remy's job}

Rules relate sections of state space to actions.

\begin{quote}
The task: find best set of rules to maximize expected value of
objective function.

\end{quote}

\end{frame}

\begin{frame}
\frametitle{The algorithm (illustration TKTKTKTK)}

\begin{itemize}
\item Initially: one default rule for whole state space

\item Find best action for whole state space

\item Subdivide rule at median query $\rightarrow$ 8 new rules

\item Repeat

\end{itemize}

\ssline

Optimize existing rules and rule structure \textbf{in parallel}.

\end{frame}

\begin{frame}
\frametitle{Fixed 15 Mbps link, 8 senders, flows exp-distributed}

\section{Experiments}

\noindent \includegraphics[width=8.5 cm]{eth8-final-bytes.pdf}

\end{frame}

\begin{frame}

\noindent \includegraphics[width=8.5 cm]{legend.pdf}

\end{frame}

\begin{frame}
\frametitle{Fixed 15 Mbps link, 12 senders, heavy-tailed flows}

\noindent \includegraphics[width=8.5 cm]{eth12-final-flowcdf.pdf}

\end{frame}

\begin{frame}
\frametitle{Verizon LTE, 8 senders, flows exp-distributed}

\noindent \includegraphics[width=8.5 cm]{vzw-8-final.pdf}

\end{frame}

\begin{frame}
\frametitle{Prior knowledge is helpful, when correct}

\noindent \includegraphics[width=8.5 cm]{spec2.pdf}

\end{frame}

\begin{frame}
\frametitle{Why does Remy work? TKTKTKTKTK}

\section{Discussion}

\begin{itemize}
\item Not entirely clear! (TKTKTKTK)

\item Need to reverse-engineer algorithms.

\item Hundreds of rules --- are they all necessary?
\end{itemize}

\end{frame}

\begin{frame}
\frametitle{Goal-driven algorithm \textbf{moves} the complexity}

\textbf{Human-designed algorithm:}

\begin{itemize}
\item Simple algorithm
\item Complex and subpar emergent behavior
\item \ldots worse when implicit assumptions not met
\end{itemize}

\textbf{Computer-designed algorithm:}

\begin{itemize}
\item Complex algorithm
\item Consistent and good emergent behavior
\item \ldots much worse when stated assumptions not met
\end{itemize}

\end{frame}

\begin{frame}
\frametitle{Evolvability}

\textbf{Status quo:}

\begin{itemize}

\item link layer constrained by need for TCP to perform
\item apps add hacks to get around TCP

\end{itemize}

\textbf{Evolvable transport:}

\begin{itemize}

\item accommodate whatever link layer does \& app wants

\end{itemize}

\end{frame}

\begin{frame}
\frametitle{Conclusions}

\section{}

\begin{itemize}

\item Computer-designed $>$ human-designed

\item End-to-end $>$ human-designed in-net

\item Focus on goal and assumptions $>$ focus on mechanism

\end{itemize}

\end{frame}

\begin{frame}
\frametitle{Summary}

\begin{itemize}

\item Find the best schemes for \textbf{evolving} networks and apps.

\item Transport should adapt to what lower layers do \& users want.

\item Focus on policy, not mechanism.

\item Get explicit about assumptions.

\end{itemize}

\ssline

\begin{centering}

http://web.mit.edu/remy

\{keithw,hari\}@mit.edu

\end{centering}

\end{frame}

\end{document}
